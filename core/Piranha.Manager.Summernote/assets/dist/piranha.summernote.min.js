piranha.summernote={},piranha.summernote.linkmodal=new Vue({el:"#summernotelink",data:{url:null,text:null,target:null,callback:null,zindex:3010},methods:{open:function(e,n,t,i){this.url=e,this.text=n,this.target=t,this.callback=i,$("#summernotelink").modal("show")},selectPage:function(){var e=this;this.zindex=2e3,piranha.pagepicker.open(function(n){e.url=n.permalink,e.zindex=3010})},selectPost:function(){var e=this;this.zindex=2e3,piranha.postpicker.open(function(n){e.url=n.permalink,e.zindex=3010})},selectMedia:function(){var e=this;this.zindex=2e3,piranha.mediapicker.openCurrentFolder(function(n){e.url=n.publicUrl,e.zindex=3010},null)},save:function(){this.callback&&this.callback({url:this.url,text:this.text,target:this.target}),$("#summernotelink").modal("hide")}}});var ImageButton=function(e){return $.summernote.ui.button({contents:'<i class="note-icon-picture"/>',tooltip:"Image",click:function(){e.invoke("saveRange"),piranha.mediapicker.open(function(n){e.invoke("restoreRange"),e.invoke("insertImage",n.publicUrl,n.filename)},"image")}}).render()},LinkButton=function(e){return $.summernote.ui.button({contents:'<i class="note-icon-link"/>',tooltip:"Link",click:function(){var n=e.invoke("createRange");e.invoke("saveRange"),piranha.summernote.linkmodal.open("",n.toString(),"",function(n){e.invoke("restoreRange"),e.invoke("pasteHTML",'<a href="'+n.url+'">'+n.text+"</a>"),console.log(n)})}}).render()};piranha.editor.addInline=function(e,n,t){$("#"+e).summernote({toolbar:[["style",["bold","italic","underline","clear"]],["para",["ul","ol","paragraph"]],["media",["piranhalink","piranhaimage"]],["view",["codeview"]]],buttons:{piranhaimage:ImageButton,piranhalink:LinkButton},popover:{image:[],link:[],air:[]},codemirror:{lineNumbers:!0,mode:"text/html",lineWrapping:!0,extraKeys:{"Ctrl-Space":"autocomplete"}},callbacks:{onBlur:function(){t&&t($("#"+e).summernote("code"))},onBlurCodeview:function(){t&&t($("#"+e).summernote("code"))}}})},piranha.editor.remove=function(e){$("#"+e).summernote("destroy")};